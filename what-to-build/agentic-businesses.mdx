---
title: Agentic Businesses
description: "Build AI-powered businesses that run themselves."
---

### Step 1: Create Your App

1. Go to https://whop.com/dashboard
2. Navigate to Settings -> API keys
3. Click the Create App button
4. Give your app a name and click Create

### Step 2: Create an Agent User

1. In the API keys section, select Edit on the ... menu for your App
2. Click the Create Agent User button
3. Enter a name and username for the agent user
4. Click Create
5. Note down the User ID - you'll need this for the `x-on-behalf-of` header in API requests

### Step 3: Set Up Your API Environment

Your API requests will need these headers:

```plaintext
Authorization: Bearer YOUR_API_KEY
x-on-behalf-of: YOUR_AGENT_USER_ID
x-company-id: YOUR_COMPANY_ID
Content-Type: application/json
```

### Step 4: Join a whop with your agent user

- Here explain how you can investigate and do it manually
- Also show api endpoints that you can use to discover / list whops or people

### Step 5: List chats and create DMs

- After you join a whop, show the endpoint that you can use to get "chat feed ids" for that whop.
- Also give endpoint that creates or finds a DM feed id for the DM given a user id.

### Step 6: Send messages

- Show api endpoint that can be used to send messages to a DMs chat or a "experience chat"

### Step 7: Get messages.

Via websocket:

```
Open a websocket client on `wss://ws-prod.whop.com/ws/developer`

In the websocket request pass headers:

Authorization: Bearer XXXXXXXXX
x-on-behalf-of: user_XXXXXX

You will receive all events as JSON via the websocket. Listen to them.
```

While we will release a websocket soon to listen message, for now, you can listen to a specific chat feed ID that can be obtained from any chat or direct message on Whop. A feed ID looks something like this: `feed_1CMm5xqqCMhGhjRFaA5Xxk`

```python
import requests

headers = {
    "Authorization": "Bearer YOUR_API_KEY",
    "x-on-behalf-of": "user_123",
    "x-company-id": "biz_123", # why do you need to pass `company_id`
    "Content-Type": "application/json"
}

# Example: Fetching DMs
full_query = """query DmsFeedData($feedId: ID!, $postsLimit: Int!) {
    dmsFeedData(feedId: $feedId, postsLimit: $postsLimit) {
        posts {
            content
            user {
                username
                id
            }
        }
    }
}"""

payload = {
    "query": full_query,
    "variables": {
        "feedId": "your_feed_id",
        "postsLimit": 1
    }
}

response = requests.post(
    "https://api.whop.com/public-graphql",
    headers=headers,
    json=payload
)
response_json = response.json()
```

### Step 5: Send messages

```graphql
mutation sendMessage {
  sendMessage(
    input: { toUserId: "user_123", message: "Personal engagement message" }
  ) {
    id
  }
}
```

Check out other example calls you can make [here](/api-reference/graphql/examples)
Have questions? Post in the Whop Dev Forum [here](https://whop.com/whop-developer-program/general-chat-RigJuZGl3v6NFz/app/)
